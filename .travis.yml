language: cpp

compiler:
  - gcc

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get -qq update

install:
  - sudo apt-get -qq install g++-5.4
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5.4 1
  - sudo apt-get -qq install valgrind
  - sudo apt-get -qq install libgtest-dev
  - GIT_REPOSITORY=$(pwd)
  - cd /usr/src/gtest
  - sudo cmake .
  - sudo make
  - sudo mv libg* /usr/lib/
  - cd $GIT_REPOSITORY

script:
  - mkdir bin
  - cd bin
  - cmake ..
  - cd ..
  - make -Cbin
  - make -Cbin test
